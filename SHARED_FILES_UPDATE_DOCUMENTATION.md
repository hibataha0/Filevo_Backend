# ๐ค ุชูุซูู: ุชุญุฏูุซ ุงููููุงุช ุงููุดุชุฑูุฉ

## ๐ฏ ุงููุฏู
ุถูุงู ุฃู ุงูุชุญุฏูุซุงุช ุนูู ุงููููุงุช ุงููุดุชุฑูุฉ (ุฎุงุตุฉ ุงูุตูุฑ) ุชุธูุฑ ูููุณุชุฎุฏููู ุงููุดุงุฑูููุ ุจููุณ ุงูุทุฑููุฉ ุงูุชู ุชุนูู ุจูุง ุงููููุงุช ุงููุตูุฉ.

## ๐ ุงููุดููุฉ
- **ุงููููุงุช ุงููุตูุฉ**: ุนูุฏ ุงูุชุญุฏูุซุ ูุชู ุงุณุชุจุฏุงู ุงูููู ุงููุฏูู ุจููุณ ุงูุงุณู ูุงููุณุงุฑุ ูุฐูู ูุธูุฑ ุงูุชุญุฏูุซ ูููุณุชุฎุฏููู ุงููุดุงุฑููู ุชููุงุฆูุงู.
- **ุงูุตูุฑ**: ุนูุฏ ุงูุชุญุฏูุซุ ูุงู ูุชู ุฅูุดุงุก ููู ุฌุฏูุฏ ุจูุณุงุฑ ุฌุฏูุฏุ ูุงููุณุชุฎุฏููู ุงููุดุงุฑููู ูุง ูุฑูู ุงูุชุญุฏูุซุงุช.

## โ ุงูุญู
ุชู ุชุนุฏูู ุฏุงูุฉ `updateFileContent` ุจุญูุซ:
- **ุงููููุงุช ุงููุดุชุฑูุฉ**: ูุชู ุงุณุชุจุฏุงููุง ุชููุงุฆูุงู (replace mode) ุญุชู ููุตูุฑ
- ูุฐุง ูุถูู ุฃู ุงููุณุชุฎุฏููู ุงููุดุงุฑููู ูุฑูุง ุงูุชุญุฏูุซุงุช ุชููุงุฆูุงู ูุฃู ุงููุณุงุฑ ูุงูุงุณู ูุจููุงู ููุง ููุง

## ๐ง ุงูุชุนุฏูู ุงููููุฐ

### ุชุนุฏูู ูู `services/fileService.js`

**ูุจู ุงูุชุนุฏูู:**
```javascript
const replaceMode = isTextFile
  ? true
  : req.body.replaceMode === "true" || req.body.replaceMode === true;
```

**ุจุนุฏ ุงูุชุนุฏูู:**
```javascript
// โ ุฅุฐุง ูุงู ุงูููู ูุดุงุฑูุงูุ ุงุณุชุฎุฏู replace mode ุชููุงุฆูุงู ุญุชู ููุตูุฑ
const isShared = file.isShared === true || (file.sharedWith && file.sharedWith.length > 0);

const replaceMode = isTextFile || isShared
  ? true
  : req.body.replaceMode === "true" || req.body.replaceMode === true;
```

## ๐ ุณูุฑ ุงูุนูู

### 1. ููู ูุตู (ูุดุงุฑู ุฃู ุบูุฑ ูุดุงุฑู)
- โ ูุชู ุงุณุชุจุฏุงูู ุชููุงุฆูุงู (replace mode)
- โ ููุณ ุงูุงุณู ูุงููุณุงุฑ
- โ ุงููุณุชุฎุฏููู ุงููุดุงุฑููู ูุฑูู ุงูุชุญุฏูุซุงุช ุชููุงุฆูุงู

### 2. ุตูุฑุฉ ูุดุชุฑูุฉ
- โ ูุชู ุงุณุชุจุฏุงููุง ุชููุงุฆูุงู (replace mode)
- โ ููุณ ุงูุงุณู ูุงููุณุงุฑ
- โ ุงููุณุชุฎุฏููู ุงููุดุงุฑููู ูุฑูู ุงูุชุญุฏูุซุงุช ุชููุงุฆูุงู

### 3. ุตูุฑุฉ ุบูุฑ ูุดุชุฑูุฉ
- โ ูููู ุงุฎุชูุงุฑ replace mode ุฃู new version mode
- โ ุญุณุจ `replaceMode` ูู body

## ๐ ุฃูุซูุฉ ุงูุงุณุชุฎุฏุงู

### ูุซุงู 1: ุชุญุฏูุซ ุตูุฑุฉ ูุดุชุฑูุฉ

```http
PUT /api/files/:id/content
Content-Type: multipart/form-data
Authorization: Bearer <token>

file: <new_image.jpg>
```

**ุงููุชูุฌุฉ:**
- ูุชู ุงุณุชุจุฏุงู ุงูุตูุฑุฉ ุงููุฏููุฉ ุชููุงุฆูุงู (ูุฃููุง ูุดุชุฑูุฉ)
- ููุณ ุงูุงุณู ูุงููุณุงุฑ
- ุงููุณุชุฎุฏููู ุงููุดุงุฑููู ูุฑูู ุงูุตูุฑุฉ ุงูุฌุฏูุฏุฉ ุชููุงุฆูุงู

### ูุซุงู 2: ุชุญุฏูุซ ุตูุฑุฉ ุบูุฑ ูุดุชุฑูุฉ

```http
PUT /api/files/:id/content
Content-Type: multipart/form-data
Authorization: Bearer <token>

file: <new_image.jpg>
replaceMode: true
```

**ุงููุชูุฌุฉ:**
- ูุชู ุงุณุชุจุฏุงู ุงูุตูุฑุฉ ุงููุฏููุฉ (ูุฃู `replaceMode = true`)
- ููุณ ุงูุงุณู ูุงููุณุงุฑ

### ูุซุงู 3: ุชุญุฏูุซ ุตูุฑุฉ ุบูุฑ ูุดุชุฑูุฉ (ูุณุฎุฉ ุฌุฏูุฏุฉ)

```http
PUT /api/files/:id/content
Content-Type: multipart/form-data
Authorization: Bearer <token>

file: <new_image.jpg>
replaceMode: false
```

**ุงููุชูุฌุฉ:**
- ูุชู ุฅูุดุงุก ูุณุฎุฉ ุฌุฏูุฏุฉ ุจูุณุงุฑ ุฌุฏูุฏ
- ุงุณู ุฌุฏูุฏ (ูุน timestamp)

## โ๏ธ ุงูููุทู

```javascript
// ุชุญุฏูุฏ ุฅุฐุง ูุงู ุงูููู ูุดุงุฑูุงู
const isShared = file.isShared === true || 
                 (file.sharedWith && file.sharedWith.length > 0);

// ุงุณุชุฎุฏุงู replace mode ุฅุฐุง:
// 1. ุงูููู ูุตู (isTextFile)
// 2. ุงูููู ูุดุงุฑู (isShared)
// 3. ุงููุณุชุฎุฏู ุงุฎุชุงุฑ replaceMode = true
const replaceMode = isTextFile || isShared
  ? true
  : req.body.replaceMode === "true" || req.body.replaceMode === true;
```

## โ ุงูููุฒุงุช

- โ ุงุณุชุจุฏุงู ุชููุงุฆู ูููููุงุช ุงููุดุชุฑูุฉ (ุญุชู ุงูุตูุฑ)
- โ ุงููุณุชุฎุฏููู ุงููุดุงุฑููู ูุฑูู ุงูุชุญุฏูุซุงุช ุชููุงุฆูุงู
- โ ููุณ ุงูุณููู ูููููุงุช ุงููุตูุฉ ูุงูุตูุฑ ุงููุดุชุฑูุฉ
- โ ูุฑููุฉ ูููููุงุช ุบูุฑ ุงููุดุชุฑูุฉ

## ๐ ุงูุญุงูุงุช ุงููุฎุชููุฉ

| ููุน ุงูููู | ูุดุงุฑูุ | replaceMode | ุงููุชูุฌุฉ |
|-----------|---------|-------------|---------|
| ูุตู | ูุนู/ูุง | - | โ ุงุณุชุจุฏุงู ุชููุงุฆู |
| ุตูุฑุฉ | ูุนู | - | โ ุงุณุชุจุฏุงู ุชููุงุฆู |
| ุตูุฑุฉ | ูุง | true | โ ุงุณุชุจุฏุงู |
| ุตูุฑุฉ | ูุง | false | โ ูุณุฎุฉ ุฌุฏูุฏุฉ |
| ุตูุฑุฉ | ูุง | ุบูุฑ ููุฌูุฏ | โ ูุณุฎุฉ ุฌุฏูุฏุฉ |

## ๐ ุงููุชูุฌุฉ

ุงูุขู:
- โ ุงููููุงุช ุงููุตูุฉ ุงููุดุชุฑูุฉ: ูุชู ุงุณุชุจุฏุงููุง ุชููุงุฆูุงู
- โ ุงูุตูุฑ ุงููุดุชุฑูุฉ: ูุชู ุงุณุชุจุฏุงููุง ุชููุงุฆูุงู
- โ ุงููุณุชุฎุฏููู ุงููุดุงุฑููู ูุฑูู ุงูุชุญุฏูุซุงุช ุชููุงุฆูุงู
- โ ููุณ ุงูุณููู ูููููุงุช ุงููุตูุฉ ูุงูุตูุฑ ุงููุดุชุฑูุฉ

## ๐ ุงููููุงุช ุงููุนุฏูุฉ

1. โ `services/fileService.js` - ุชุนุฏูู ุฏุงูุฉ `updateFileContent`




















