# ๐ง ุชูุซูู ูุธุงู ุงูุชุญูู ูู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู

## ๐ฏ ุงููุฏู
ุฅุถุงูุฉ ูุธุงู ุชุญูู ูู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ุนูุฏ ุงูุชุณุฌูู. ุงููุณุชุฎุฏู ูุง ูุณุชุทูุน ุชุณุฌูู ุงูุฏุฎูู ุฅูุง ุจุนุฏ ุชูุนูู ุญุณุงุจู ุจุฅุฏุฎุงู ุงูููุฏ ุงููุฑุณู ุฅูู ุจุฑูุฏู ุงูุฅููุชุฑููู.

## ๐ ุงูุชุนุฏููุงุช ุงููููุฐุฉ

### 1๏ธโฃ ุชุญุฏูุซ `models/userModel.js`

**ุฅุถุงูุฉ ุญููู ุฌุฏูุฏุฉ:**
- `emailVerificationCode`: String - ููุฏ ุงูุชุญูู ุงููุดูุฑ
- `emailVerificationExpires`: Date - ุชุงุฑูุฎ ุงูุชูุงุก ุตูุงุญูุฉ ุงูููุฏ
- `emailVerified`: Boolean (default: false) - ุญุงูุฉ ุชูุนูู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู

### 2๏ธโฃ ุชุนุฏูู `services/authService.js`

#### ุฃ) ุชุนุฏูู `registerUser`
- โ ุฅูุดุงุก ุงููุณุชุฎุฏู ูุน `emailVerified = false`
- โ ุชูููุฏ ููุฏ ุชุญูู ูู 6 ุฃุฑูุงู
- โ ุชุดููุฑ ุงูููุฏ ูุญูุธู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- โ ุฅุฑุณุงู ุงูููุฏ ุนุจุฑ ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
- โ ุฅุฑุฌุงุน ุฑุณุงูุฉ ูุฌุงุญ ุจุฏูู token (ูุฃู ุงูุญุณุงุจ ุบูุฑ ููุนูู)

#### ุจ) ุฅุถุงูุฉ `verifyEmailCode`
- โ ุงูุชุญูู ูู ุตุญุฉ ููุฏ ุงูุชุญูู
- โ ุงูุชุญูู ูู ุนุฏู ุงูุชูุงุก ุตูุงุญูุฉ ุงูููุฏ
- โ ุชูุนูู ุงูุญุณุงุจ (`emailVerified = true`)
- โ ุญุฐู ููุฏ ุงูุชุญูู ุจุนุฏ ุงูุชูุนูู
- โ ุชูููุฏ token ูุฅุฑุฌุงุนู ุจุนุฏ ุงูุชูุนูู

#### ุฌ) ุฅุถุงูุฉ `resendVerificationCode`
- โ ุฅุนุงุฏุฉ ุฅุฑุณุงู ููุฏ ุงูุชุญูู ูููุณุชุฎุฏููู ุบูุฑ ุงูููุนูููู
- โ ุชูููุฏ ููุฏ ุฌุฏูุฏ
- โ ุฅุฑุณุงู ุงูููุฏ ุนุจุฑ ุงูุจุฑูุฏ ุงูุฅููุชุฑููู

#### ุฏ) ุชุนุฏูู `login`
- โ ุงูุชุญูู ูู ุฃู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ููุนูู ูุจู ุงูุณูุงุญ ุจุชุณุฌูู ุงูุฏุฎูู
- โ ุฅุฑุฌุงุน ุฑุณุงูุฉ ุฎุทุฃ ุฅุฐุง ูุงู ุงูุญุณุงุจ ุบูุฑ ููุนูู

### 3๏ธโฃ ุชุญุฏูุซ `api/authRoutes.js`

**ุฅุถุงูุฉ routes ุฌุฏูุฏุฉ:**
- `POST /api/v1/auth/verifyEmail` - ููุชุญูู ูู ููุฏ ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
- `POST /api/v1/auth/resendVerificationCode` - ูุฅุนุงุฏุฉ ุฅุฑุณุงู ููุฏ ุงูุชุญูู

## ๐ ุณูุฑ ุงูุนูู (Workflow)

### 1. ุงูุชุณุฌูู (Register)
```
POST /api/v1/auth/registerUser
Body: { name, email, password, passwordConfirm }

Response:
{
  "success": true,
  "message": "ุชู ุฅูุดุงุก ุงูุญุณุงุจ ุจูุฌุงุญ. ูุฑุฌู ุงูุชุญูู ูู ุจุฑูุฏู ุงูุฅููุชุฑููู ูุฅุฏุฎุงู ููุฏ ุงูุชุญูู",
  "userId": "...",
  "email": "..."
}
```

**ูุง ูุญุฏุซ:**
1. ุฅูุดุงุก ุงููุณุชุฎุฏู ูุน `emailVerified = false`
2. ุชูููุฏ ููุฏ ุชุญูู ูู 6 ุฃุฑูุงู
3. ุฅุฑุณุงู ุงูููุฏ ุฅูู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
4. ุญูุธ ุงูููุฏ ุงููุดูุฑ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

### 2. ุงูุชุญูู ูู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู (Verify Email)
```
POST /api/v1/auth/verifyEmail
Body: { email, verificationCode }

Response:
{
  "success": true,
  "message": "ุชู ุชูุนูู ุงูุญุณุงุจ ุจูุฌุงุญ",
  "data": { ...user },
  "token": "..."
}
```

**ูุง ูุญุฏุซ:**
1. ุงูุชุญูู ูู ุตุญุฉ ุงูููุฏ
2. ุงูุชุญูู ูู ุนุฏู ุงูุชูุงุก ุตูุงุญูุฉ ุงูููุฏ (10 ุฏูุงุฆู)
3. ุชูุนูู ุงูุญุณุงุจ (`emailVerified = true`)
4. ุญุฐู ููุฏ ุงูุชุญูู
5. ุชูููุฏ token ูุฅุฑุฌุงุนู

### 3. ุชุณุฌูู ุงูุฏุฎูู (Login)
```
POST /api/v1/auth/login
Body: { email, password }

Response (if email verified):
{
  "data": { ...user },
  "token": "..."
}

Response (if email not verified):
{
  "status": "error",
  "message": "ูุฑุฌู ุชูุนูู ุญุณุงุจู ุฃููุงู. ุชุญูู ูู ุจุฑูุฏู ุงูุฅููุชุฑููู ูุฅุฏุฎุงู ููุฏ ุงูุชุญูู"
}
```

### 4. ุฅุนุงุฏุฉ ุฅุฑุณุงู ููุฏ ุงูุชุญูู (Resend Code)
```
POST /api/v1/auth/resendVerificationCode
Body: { email }

Response:
{
  "success": true,
  "message": "ุชู ุฅุฑุณุงู ููุฏ ุงูุชุญูู ุฅูู ุจุฑูุฏู ุงูุฅููุชุฑููู"
}
```

## ๐ ุชูุงุตูู ุชูููุฉ

### ููุฏ ุงูุชุญูู
- **ุงูุทูู:** 6 ุฃุฑูุงู
- **ุงูุชุดููุฑ:** SHA-256 hash
- **ูุฏุฉ ุงูุตูุงุญูุฉ:** 10 ุฏูุงุฆู
- **ุงูุชูููุฏ:** `Math.floor(100000 + Math.random() * 900000)`

### ุฑุณุงูุฉ ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
```
ูุฑุญุจุงู [ุงุณู ุงููุณุชุฎุฏู],

ุดูุฑุงู ูู ุนูู ุงูุชุณุฌูู ูู Filevo!

ููุฏ ุงูุชุญูู ูู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ุงูุฎุงุต ุจู ูู:
[ููุฏ ุงูุชุญูู]

ูุฐุง ุงูููุฏ ุตุงูุญ ููุฏุฉ 10 ุฏูุงุฆู.

ุฅุฐุง ูู ุชุทูุจ ูุฐุง ุงูููุฏุ ููููู ุชุฌุงูู ูุฐู ุงูุฑุณุงูุฉ.

ุดูุฑุงู ููุ
ูุฑูู Filevo
```

## โ๏ธ ููุงุญุธุงุช ูููุฉ

1. **ุงูุญุณุงุจ ุบูุฑ ุงูููุนูู:**
   - ูุง ูููู ุชุณุฌูู ุงูุฏุฎูู
   - ูููู ุทูุจ ุฅุนุงุฏุฉ ุฅุฑุณุงู ุงูููุฏ
   - ุงูููุฏ ุตุงูุญ ููุฏุฉ 10 ุฏูุงุฆู ููุท

2. **ุงูุญุณุงุจ ุงูููุนูู:**
   - ูููู ุชุณุฌูู ุงูุฏุฎูู ุจุดูู ุทุจูุนู
   - ูุง ูุญุชุงุฌ ุฅูู ููุฏ ุชุญูู ูุฑุฉ ุฃุฎุฑู

3. **ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก:**
   - ุฅุฐุง ูุดู ุฅุฑุณุงู ุงูุจุฑูุฏ ุนูุฏ ุงูุชุณุฌููุ ูุชู ุญุฐู ุงูููุฏ
   - ุฅุฐุง ูุดู ุฅุฑุณุงู ุงูุจุฑูุฏ ุนูุฏ ุฅุนุงุฏุฉ ุงูุฅุฑุณุงูุ ูุชู ุญุฐู ุงูููุฏ
   - ุงูููุฏ ุงูููุชูู ุงูุตูุงุญูุฉ ูุง ูููู ุงุณุชุฎุฏุงูู

## ๐งช ุฃูุซูุฉ ุงูุงุณุชุฎุฏุงู

### ูุซุงู 1: ุงูุชุณุฌูู
```javascript
// Frontend
const response = await fetch('/api/v1/auth/registerUser', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({
    name: 'ุฃุญูุฏ ูุญูุฏ',
    email: 'ahmed@example.com',
    password: 'password123',
    passwordConfirm: 'password123'
  })
});

// ุงููุณุชุฎุฏู ุณูุญุชุงุฌ ุฅูู ุฅุฏุฎุงู ุงูููุฏ ุงููุฑุณู ุฅูู ุงูุจุฑูุฏ
```

### ูุซุงู 2: ุงูุชุญูู ูู ุงูุจุฑูุฏ
```javascript
// Frontend
const response = await fetch('/api/v1/auth/verifyEmail', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({
    email: 'ahmed@example.com',
    verificationCode: '123456'
  })
});

const data = await response.json();
// ุญูุธ token ูู localStorage
localStorage.setItem('token', data.token);
```

### ูุซุงู 3: ุฅุนุงุฏุฉ ุฅุฑุณุงู ุงูููุฏ
```javascript
// Frontend
const response = await fetch('/api/v1/auth/resendVerificationCode', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({
    email: 'ahmed@example.com'
  })
});
```

## โ ุงูุชุญูู ูู ุงูุชุนุฏููุงุช

- โ ุฅุถุงูุฉ ุญููู ูู userModel
- โ ุชุนุฏูู registerUser
- โ ุฅุถุงูุฉ verifyEmailCode
- โ ุฅุถุงูุฉ resendVerificationCode
- โ ุชุนุฏูู login
- โ ุฅุถุงูุฉ routes
- โ ูุง ุชูุฌุฏ ุฃุฎุทุงุก ูู linter

## ๐ ุงููููุงุช ุงููุนุฏูุฉ

1. `models/userModel.js` - ุฅุถุงูุฉ ุญููู ุงูุชุญูู
2. `services/authService.js` - ุชุนุฏูู ูุฅุถุงูุฉ ุฏูุงู
3. `api/authRoutes.js` - ุฅุถุงูุฉ routes

## ๐ ุงููุชูุฌุฉ

ุชู ุฅุถุงูุฉ ูุธุงู ุชุญูู ูู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ุจูุฌุงุญ! ุงูุขู:
- โ ุนูุฏ ุงูุชุณุฌููุ ูุชู ุฅุฑุณุงู ููุฏ ุชุญูู ุฅูู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
- โ ุงููุณุชุฎุฏู ูุง ูุณุชุทูุน ุชุณุฌูู ุงูุฏุฎูู ุฅูุง ุจุนุฏ ุชูุนูู ุงูุญุณุงุจ
- โ ูููู ุฅุนุงุฏุฉ ุฅุฑุณุงู ููุฏ ุงูุชุญูู ุฅุฐุง ุงูุชูุช ุตูุงุญูุชู
- โ ุงูููุฏ ุตุงูุญ ููุฏุฉ 10 ุฏูุงุฆู ููุท










